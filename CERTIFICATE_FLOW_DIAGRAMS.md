# Certificate Generation - Visual Flow Diagrams

## User Journey Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Views Completed Candidates Page                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Table shows:               â”‚
        â”‚ - Candidate Name           â”‚
        â”‚ - Email                    â”‚
        â”‚ - Domain                   â”‚
        â”‚ - Buttons:                 â”‚
        â”‚  â€¢ ğŸ“œ Certificate (ORANGE) â”‚
        â”‚  â€¢ Accept                  â”‚
        â”‚  â€¢ Reject                  â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ (Click ğŸ“œ Certificate)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal Opens - "Generating certificate..."                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼ (Backend processes)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Generates Certificate:                              â”‚
â”‚ 1. Fetch candidate from database                            â”‚
â”‚ 2. Generate certificate ID (SZS_CERT_2025_NOV_001)         â”‚
â”‚ 3. Load certificate template PDF                           â”‚
â”‚ 4. Overlay candidate name on PDF                           â”‚
â”‚ 5. Save to generated/ folder                               â”‚
â”‚ 6. Return base64-encoded PDF                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼ (PDF data returned)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal Displays Certificate                                  â”‚
â”‚ - Shows PDF in iframe                                       â”‚
â”‚ - Certificate ID in title                                   â”‚
â”‚ - Candidate name visible on certificate                     â”‚
â”‚ - ğŸ“¥ Download button appears                               â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â””â”€ (Admin can)
        â€¢ View certificate in modal
        â€¢ Click Download â†’ Save PDF
        â€¢ Click Close â†’ Close modal
```

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ADMIN PORTAL                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ admin_approved_candidates.html (Frontend)             â”‚  â”‚
â”‚  â”‚  - Completed Candidates Table                          â”‚  â”‚
â”‚  â”‚  - ğŸ“œ Certificate Button (ORANGE)                     â”‚  â”‚
â”‚  â”‚  - Certificate Modal                                   â”‚  â”‚
â”‚  â”‚  - JavaScript Functions:                               â”‚  â”‚
â”‚  â”‚    â€¢ issueCertificate()                               â”‚  â”‚
â”‚  â”‚    â€¢ displayCertificate()                             â”‚  â”‚
â”‚  â”‚    â€¢ downloadCertificate()                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚ POST /admin/api/generate-certificate/<id>       â”‚
â”‚           â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          admin_app.py (Backend)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ @app.route('/admin/api/generate-certificate')   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  1. Validate admin authentication               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  2. Fetch candidate from ApprovedCandidate DB   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  3. Call generate_certificate_pdf()            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Generate serial number                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Load certificate template                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Overlay candidate name                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â”œâ”€ Create PDF                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚     â””â”€ Save to disk                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  4. Encode PDF as base64                        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  5. Return JSON response                        â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ @app.route('/admin/api/download-certificate')  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  1. Validate admin authentication               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  2. Locate certificate file on disk            â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  3. Send file for download                     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                       â”‚
â”‚                      â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            Database (MySQL)                           â”‚  â”‚
â”‚  â”‚  - approved_candidates table                           â”‚  â”‚
â”‚  â”‚    â€¢ user_id (Candidate ID)                            â”‚  â”‚
â”‚  â”‚    â€¢ name (Candidate Name)                             â”‚  â”‚
â”‚  â”‚    â€¢ email                                             â”‚  â”‚
â”‚  â”‚    â€¢ domain                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FILE SYSTEM - SWIZ CERTI Folder                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ certificate-generator/                                â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ certificate/                                     â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ certificate_template.pdf â† Template Used    â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€ generated/                                       â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ SZS_CERT_2025_NOV_001.pdf â† Generated      â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ SZS_CERT_2025_NOV_002.pdf                 â”‚  â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ SZS_CERT_2025_NOV_003.pdf                 â”‚  â”‚
â”‚  â”‚  â”‚   â””â”€â”€ ...                                         â”‚  â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â””â”€â”€ serial.json â† Tracking Serial Numbers          â”‚  â”‚
â”‚  â”‚      {                                                â”‚  â”‚
â”‚  â”‚        "month": "NOV",                               â”‚  â”‚
â”‚  â”‚        "serial": 3                                   â”‚  â”‚
â”‚  â”‚      }                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Certificate Generation Process (Detailed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin Clicks ğŸ“œ Certificate Button          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ JavaScript:        â”‚
    â”‚ issueCertificate() â”‚
    â”‚ - Opens modal      â”‚
    â”‚ - POST API call    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend: generate_certificate()           â”‚
    â”‚                                           â”‚
    â”‚ Step 1: Validate & Fetch                 â”‚
    â”‚  - Check admin authenticated             â”‚
    â”‚  - Fetch candidate by user_id            â”‚
    â”‚  - Validate candidate exists             â”‚
    â”‚  - Extract candidate name               â”‚
    â”‚                                           â”‚
    â”‚ Step 2: Generate Certificate ID         â”‚
    â”‚  - Get current date                      â”‚
    â”‚  - Extract month (NOV)                   â”‚
    â”‚  - Extract year (2025)                   â”‚
    â”‚  - Read serial.json                      â”‚
    â”‚  - Check if month matches               â”‚
    â”‚  - If new month: reset serial to 0      â”‚
    â”‚  - Increment serial: 1, 2, 3...         â”‚
    â”‚  - Create ID: SZS_CERT_2025_NOV_003     â”‚
    â”‚  - Save back to serial.json             â”‚
    â”‚                                           â”‚
    â”‚ Step 3: Generate PDF                     â”‚
    â”‚  - Load certificate_template.pdf         â”‚
    â”‚  - Create canvas layer                   â”‚
    â”‚  - Convert name to UPPERCASE             â”‚
    â”‚  - Calculate center position            â”‚
    â”‚  - Set font: Times-Italic, 33pt        â”‚
    â”‚  - Draw name on canvas                   â”‚
    â”‚  - Merge layers                          â”‚
    â”‚  - Create output PDF                    â”‚
    â”‚                                           â”‚
    â”‚ Step 4: Save & Encode                    â”‚
    â”‚  - Save PDF to generated/ folder         â”‚
    â”‚  - Read PDF file                         â”‚
    â”‚  - Encode as base64                      â”‚
    â”‚  - Create response JSON                  â”‚
    â”‚                                           â”‚
    â”‚ Step 5: Return Response                  â”‚
    â”‚  {                                        â”‚
    â”‚    success: true,                        â”‚
    â”‚    certificate_id: "SZS_CERT_2025_NOV_003",
    â”‚    pdf_data: "JVBERi0xLjQK...",        â”‚
    â”‚    filename: "SZS_CERT_2025_NOV_003.pdf"â”‚
    â”‚  }                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ JavaScript:                   â”‚
    â”‚ displayCertificate()          â”‚
    â”‚                               â”‚
    â”‚ - Create iframe element       â”‚
    â”‚ - Set iframe src to base64    â”‚
    â”‚ - Set modal title with ID     â”‚
    â”‚ - Show download button        â”‚
    â”‚ - Display PDF in modal        â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ Admin Views â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Certificate in Modal   â”‚
         â”‚                         â”‚
         â–¼                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚ Admin Action:           â”‚   â”‚
    â”‚ Click Download or Close â”‚   â”‚
    â”‚                         â”‚   â”‚
    â”œâ”€ Download:             â”‚   â”‚
    â”‚  â€¢ Convert base64â†’blob  â”‚   â”‚
    â”‚  â€¢ Create download link â”‚   â”‚
    â”‚  â€¢ Trigger download     â”‚   â”‚
    â”‚  â€¢ Save as PDF file     â”‚   â”‚
    â”‚                         â”‚   â”‚
    â””â”€ Close:                â”‚   â”‚
       â€¢ Clear modal data     â”€â”€â”€â”˜
       â€¢ Close modal
```

## Certificate ID Generation Logic

```
Current Date: November 15, 2025

Step 1: Extract Date Components
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Year: 2025          â”‚
â”‚ Month: 11 (NOV)     â”‚
â”‚ Day: 15             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Check Serial File
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Read serial.json:          â”‚
â”‚ {                          â”‚
â”‚   "month": "NOV",          â”‚
â”‚   "serial": 2              â”‚
â”‚ }                          â”‚
â”‚                            â”‚
â”‚ Month match? YES            â”‚
â”‚ â†’ Don't reset             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Increment Serial
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Old serial: 2               â”‚
â”‚ Increment: 2 + 1 = 3        â”‚
â”‚ Format: %03d â†’ "003"        â”‚
â”‚                             â”‚
â”‚ Save to serial.json:        â”‚
â”‚ {                           â”‚
â”‚   "month": "NOV",           â”‚
â”‚   "serial": 3               â”‚
â”‚ }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Create Certificate ID
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Format: SZS_CERT_YYYY_MMM_NNN       â”‚
â”‚                                      â”‚
â”‚ Substitutions:                       â”‚
â”‚ - YYYY = 2025                        â”‚
â”‚ - MMM = NOV                          â”‚
â”‚ - NNN = 003                          â”‚
â”‚                                      â”‚
â”‚ Result:                              â”‚
â”‚ SZS_CERT_2025_NOV_003                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Monthly Reset
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ December 1, 2025 (Next Month):        â”‚
â”‚                                        â”‚
â”‚ Read serial.json:                     â”‚
â”‚ {                                      â”‚
â”‚   "month": "NOV",                     â”‚
â”‚   "serial": 5                         â”‚
â”‚ }                                      â”‚
â”‚                                        â”‚
â”‚ Month mismatch! (NOV â‰  DEC)           â”‚
â”‚ â†’ Reset serial to 0                  â”‚
â”‚ â†’ Update month to DEC                â”‚
â”‚                                        â”‚
â”‚ Save to serial.json:                 â”‚
â”‚ {                                      â”‚
â”‚   "month": "DEC",                     â”‚
â”‚   "serial": 0                         â”‚
â”‚ }                                      â”‚
â”‚                                        â”‚
â”‚ First certificate in December:        â”‚
â”‚ Increment: 0 + 1 = 1                 â”‚
â”‚ Result: SZS_CERT_2025_DEC_001        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Flow

```
Admin clicks Certificate button
         â”‚
         â–¼
    Is admin logged in?
    â”œâ”€ NO â†’ Return 401 Unauthorized
    â”‚       Error: "Not authenticated"
    â”‚
    â””â”€ YES â†“
      Does candidate exist?
      â”œâ”€ NO â†’ Return 404 Not Found
      â”‚       Error: "Candidate not found"
      â”‚
      â””â”€ YES â†“
        Does candidate have name?
        â”œâ”€ NO â†’ Return 400 Bad Request
        â”‚       Error: "Candidate name not found"
        â”‚
        â””â”€ YES â†“
          Does template file exist?
          â”œâ”€ NO â†’ Return 500 Server Error
          â”‚       Error: "Certificate template not found"
          â”‚
          â””â”€ YES â†“
            Can write to generated/ folder?
            â”œâ”€ NO â†’ Return 500 Server Error
            â”‚       Error: "Cannot write to generated folder"
            â”‚
            â””â”€ YES â†“
              âœ… SUCCESS! Generate & Return Certificate
                 Return 200 OK with PDF data
```

## Performance Timeline

```
Admin clicks button
â”‚
â”œâ”€ 0ms: JavaScript event fires
â”‚
â”œâ”€ 50ms: Modal opens + loading message
â”‚
â”œâ”€ 100ms: Fetch API call sent to server
â”‚
â”œâ”€ 300ms: Backend processes request
â”‚         â”œâ”€ Database query (50ms)
â”‚         â”œâ”€ PDF generation (150ms)
â”‚         â”œâ”€ Base64 encoding (50ms)
â”‚         â””â”€ Response creation (50ms)
â”‚
â”œâ”€ 450ms: Response received by browser
â”‚
â”œâ”€ 550ms: PDF iframe loads
â”‚         (depends on browser rendering)
â”‚
â”œâ”€ 650ms: Certificate visible to admin
â”‚         Download button appears
â”‚
â””â”€ Total Time: ~600-1000ms (< 1 second!)
```

---

## Summary

âœ… **One Click** â†’ Certificate generated  
âœ… **Instant Display** â†’ Shows in modal  
âœ… **Easy Download** â†’ Save to computer  
âœ… **Serial Tracking** â†’ Automatic month tracking  
âœ… **Professional** â†’ High-quality PDF output  

---

*For more details, see the full documentation files.*
